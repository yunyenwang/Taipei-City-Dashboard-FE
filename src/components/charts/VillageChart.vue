<!-- Developed by Taipei Urban Intelligence Center 2023 -->

<script setup>
import { computed, defineProps, ref, watch } from 'vue';
import { useMapStore } from '../../store/mapStore';
import { useContentStore } from '../../store/contentStore';

const props = defineProps(['chart_config', 'activeChart', 'series', 'map_config']);
const mapStore = useMapStore();
const contentStore = useContentStore();

const targetDistrict = ref(null);
const districtColor = ref(props.chart_config.color[0]);
const mousePosition = ref({ x: null, y: null });
const selectedIndex = ref(null);

const selectedDistrict = ref(null);
// watch tempTest
watch(
	() => contentStore.tempTest,
	(newValue) => {
		selectedDistrict.value = newValue
	}
);

// Parse District Data (to support 2D or 3D data)
const districtData = computed(() => {
	let output = {};
	let highest = 0;
	let sum = 0;
	if (props.series.length === 1) {
		props.series[0].data.forEach((item) => {
			output[item.x] = item.y;
			if (item.y > highest) {
				highest = item.y;
			}
			sum += item.y;
		});
	} else {
		props.series.forEach((serie) => {
			for (let i = 0; i < 12; i++) {
				if (!output[props.chart_config.categories[i]]) {
					output[props.chart_config.categories[i]] = 0;
				}
				output[props.chart_config.categories[i]] += +serie.data[i];
			}
		});
		highest = Object.values(output).sort(function (a, b) { return b - a; })[0];
		sum = Object.values(output).reduce((partialSum, a) => partialSum + a, 0);
	}

	output.highest = highest;
	output.sum = sum;
	return output;
});
const tooltipPosition = computed(() => {
	return { 'left': `${mousePosition.value.x - 10}px`, 'top': `${mousePosition.value.y - 54}px` };
});

function toggleActive(e) {
	targetDistrict.value = e.target.dataset.name;
}
function toggleActiveToNull() {
	targetDistrict.value = null;
}
function updateMouseLocation(e) {
	mousePosition.value.x = e.pageX;
	mousePosition.value.y = e.pageY;
}

function handleDataSelection(index) {
	if (!props.chart_config.map_filter) {
		return;
	}

	if (index !== selectedIndex.value) {
		mapStore.addLayerFilter(`${props.map_config[0].index}-${props.map_config[0].type}`, props.chart_config.map_filter[0], props.chart_config.map_filter[1][index]);
		selectedIndex.value = index;
	} else {
		mapStore.clearLayerFilter(`${props.map_config[0].index}-${props.map_config[0].type}`);
		selectedIndex.value = null;
	}

	
}
</script>

<template>
	<div v-if="activeChart === 'VillageChart'" class="districtchart">
		<div> {{ selectedDistrict }}</div>
		<div class="districtchart-title">
			<h5>總合</h5>
			<h6>{{ districtData.sum }} {{ chart_config.unit }}</h6>
			<div class="districtchart-title-legend">
				<p>多</p>
				<div :style="{ backgroundColor: props.chart_config.color[0] }"></div>
				<p>少</p>
			</div>
		</div>
		<div class="districtchart-chart" v-if="!selectedDistrict"> 請於左方圖表選擇指定行政區</div>
		<div class="districtchart-chart" v-if="selectedDistrict == 1">
			<svg viewBox="0 0 600 600" xmlns="http://www.w3.org/2000/svg">
				<g>	
					<path data-name="xx里"
						:class="{ 'active-district': true, 'initial-animation-1': true }"
						:fill="districtColor"
						@click="handleDataSelection(0)"
						d="m305.93 88.87l-.34.52-1.15 1.64-.87 1.56-.52.9-.19 1.82-.11.8-.06.24-.63.98-.27.52-.31.79-.42.79-.36.62-.13.19-.25.15-.99.62-1.56.04.62 1.17-.1.63-.57 4.28.29.29.78.04.62.3 1.83 1.32 3.66 2.89 2.31 2.44.22.14.73-.25 1.31-.87.43-.23.24.01.24-.03 1.35-.22 1.02-.2.45-.15.43-.09.44 0 .37-.01.66.18 1.59.61 4.84 1.91 4.94 1.96 2.67 1.06.19.14.04.19 7.11 1.95 6.19 1.68 7.08 1.94 10.97 11.21.46-.07.44-.08.58-.12.63-.1.52-.13 1.42-.19 1.74-.3 1.64-.38 2.69-.47 3.9-.69 2.47-.43 1.59-.27.07.01.8.25.41-1.17 2-3.31.8-1.78.01-.03 1.02-2.05.46-1.63.9.03.44.24.91-.78.53-.26 2.52-.5.98-.03.41-.15 1.38-1.64.46-.32 1.03-.02.08-.01 1.3-.44.92-.53.95-1.68.14-.62-.42-1.93.02-.39.05-.92.73-1.33.32-.77.14-1.48.2-.86.43-.56.53-1.66.14-1.52.03-.3.55-.18.29-.02.07-.18.32-.11.07-.18.23-.11.11-.79.1-.21-.07-.4-.37-.1.98-1.08 0-.01.19-.88-.31-1.91-.25-.35-2.59-2.3-.03-.67-1.54-3.16-.28-1.13-.82-.53.01-.61.43-.78-.05-.49-.02-.16.36-.29.36-.77 1.85-2.53.31-.47.29-.64.28-.5.18-.25.11-.13.27-.24.08-.07.01-.01.48-.34.38-.14.47-.08.04 0 .04-.01.5-.14.33-.1.71-.29.45-.2.31-.03.44.06.38.12.22.02.24-.09.39-.21.39-.31.24-.26.3-.41.46-.5.22-.38.15-.25.07-.12.19-.32 0-.16.14-.28.18-.4.04-.28.05-.33.12-.36.2-.44.09-.3.09-.42-.17-.84-.06-.65.06-.25.39-.35.12-.17.16-.29.07-.15.18-.11.22-.05.19-.01.48-.12.35-.11.17-.08.11-.05.17-.14.06-.14.03-.14.01-.04.1-.42.06-.35.03-.53-.05-.13-.1-.22-.07-.15-.01-.18-.02-.17.1-.24.11-.21.24-.16.31-.17.37-.14.28-.15.15-.07.21-.16.15-.19.09-.13.01-.28-.08-1.21-.05-.58-.07-.33-.22-.19-.21-.08-.23-.14-.18-.27-.05-.28-.02-.4.01-.31.11-.21.24-.24.28-.18.36-.09.29-.13.16-.13.06-.14-.03-.25-.01-.11-.14-.11-.26-.24-.12-.18-.15-.32-.14-.62-.03-.04-.44-.5-.71-.4-.23-2.05-.47-.96.02-.24.62-1.05.74-.86.35-.55.15-.05 1.54-.46.92-1.23 2.36-1.2.27-.31.95-.13 1.46-.75 1.11-.67.35-1.19.5-.58.49-.95.14-.78 1.08-.36.97.03 1.34-1.45-.68-.31-1.27.75-1.16.46-2.25-1.06.16-.28-1.17-.94-1.25-.9-1.1-.18-.36-.17-.32-.09-.35.04-.45.18-.14.01-.34.13-.32.05-.91.26-.67-.03-.57.23-.28.05-.45-.37-.27-.16-.47-.01-.66.1-.56-.05-.49-.03-.37-.2-1.48-1.12-.59-.56-.3-.19-.6-.72-.24-.29-.33-.15-.23-.04-.41.03-.41-.1-.43-.24-.1-.06-.03-.17-.02-.29.03-.24-.06-.25-.01-.02.07-1.83-.03-.34-.28-.9-.33-.96-.09-.57.12-.65 2.23-7.51-.21-.29-.1-.11-.04-.08.06-.2-.02-.21.07-.21.01-.36-.02-.21-.05-.29-.19-.44-.04-.07.02-.34-.09-.26-.09-.27-.15-.26-.06-.07.08-.15-.04-.34-.12-.59-.2-.56-.25-.37-.19-.3-.24-.28-.06-.07-.19-.04-.3-.44-.26-.55-.15-.26-.31-.3-.06-.19-.17-.2-.19-.13-.04-.23-.24-.46.02-.21.06-.26-.09-.13 0-.21-.04-.13-.04-.13-.05-.21-.07-.12 0-.11-.1-.15.01-.13-.09-.19-.13-.14-.05-.1-.06-.18-.13-.06-.13-.09-.16-.29-.12-.17-.03-.17-.04-.27-.05-.24-.04-.68 0-.48.03-.3-.04-.57-.06-.28-.03-.25-.13-.46-.07-.26-.12-.21-.05-.12-.02-.23.07-.24.05-.19-6.25-1.47-.04-.01-.2-.03-.55-.02-.12-.07-.5-.13-.46-.06-.28.35-.13.22-.2.03-.34.2-.17.04-.35.15-.17.1-.39.17-.14.1-.19.06-.63.57-.19.15-.32.13-.09.02-.06.05-.07.24-.17.23-.09-.04-.24-.06-.18.03-.15.12-.03.18-.07.08-.03.08-.11.06-.09.1-.17.2-.1.13-.32.02-.72-.03-.94-.15-.88.02-.17.14-.29.15-.39-.03-.31.17-1.03.11-.18.72-.12.57-.01.47-.18.11-.02.04-.32.53-.26.4-.13.37.13.23.04.17-.02.26-.2.37.06.8-.03.17-.18.34-.45.36-.2.49-.24.23-.83.57-.05.15-.5.4-.35.41.09.57.08.64-.06.45-.53.2-.61.38-.44.21-.26.05-.11.09-.47.33-.39.11-.37.1-.2.04-.4.16-.22.05 0 .14.22.47.08.52.01.21-.19.54-.33.33-.27.22-.12.13-.01.18.17.34.01.05.16.45.24.33.19.15.11.04.21.13.28.07.26.06.14.1.15.11.15.14.13.08.05.27.08.2.11.15.43.4.21.29.2.18.08.11-.06.4-.15.61-.21.87-.14.59 0 .22.02.15.31.6 0 .14-.17.46.01.26.15.25.16.18-.18.31-.08.23-.36.16-.36.02-.04.08.05.37 0 .12 0 .17-.02.11-.04.08-.4.29-.07.1 0 .09.02.2.02.49-.02.4-.01.09-.05.26.09.18.03.08-.08.06-.05.01-.15.04-.26.18-.33.15-.52.18-.24.09-.3.22-.04.04-.32.27-.09.21-.01.2-.07.01-.48-.17-1.36-.53-.18-.07-.48-.42-.25-.34-.26-.14-.54-.3-.36-.42-.52-.66-.62-.53-.24-.21-.52-.06-.09.08-.14.28-.42.14-1.3.26-.31.15-.33.28.07 1.25-.14.33-.3.09-.59.26-.1.04-.65.18-.68-.22-.01-.01-.38-.06-.06.06-.02.01-.14.18-.17.15-.27.2-.26.2-.23.29-.15.19-.25.48-.08.06-.26.09-.43.13-.11.07-.18.27-.22.13-.19.02-.35.16-.44.21-.08.05-.11.28-.08.21-.22.13-.17.13-.08.17-.2.63-.2.41-.31.24-.24.25-.42.77-.51.22-.42.32-.16.5-.07.12-.41.75.01.44.13.71-.12.42-.04.25-.01.3-.16.34-.03.29-.18.08-.32.29-.14.35.05.18.01.3-.1.2-.03.32-.11.27-.08.2-.14.55-.03.51.13.55.24.65.01.47.1.6-.22 1.01.12.24.11.22.46.89-.04.3-.22.2-.47-.09-.22-.02-.69-.03-.45-.16-.18.38.02.14-.07.31-.2.51-.29.35-.14.19-.26.4-.2.14-.38.26-.19.15-.39.38-.33.29-.28.45-.22.18-.24.1-.65.03-.41-.05-.49-.08-.27.02-.35.07-.17.09-.23 0-.22-.07-.16-.03-.12.09-.16.05-.27.08-.18-.01-.44.11-.13.08-.75.09-.1-.06-.46-.01-.15.08-.23.01-.5.29-.19 0-.29-.07-.24-.17-.11-.03-.29 0-.22 0-.74-.19-.48-.16-.14.05-.3.15-.5.23-.38.15-.36.33-.14.13-.51.5-.63.71-.21.24-.22.45-.16.49-.39 1.34-.82.97-1.01.57-.35.21-.62.46-.34.29-.79.7-1.47.03-3.4.09-1.62.05-.55.12-1.01.66-2.35.58-.4-.02-.24-.07-.44-.11-.26-.06-.23 0-.35.09-.11.02-.24.08-.06.01-.16.05-.4.01-.44.01-.34-.04-.12-.01-.4-.02-.27-.03-.46-.06-.63-.01-.32.04-.46.04-1.01.25-.25.13-.32.23-.35.31-.33.3-.37.37-.94.98-.59.52-.33.32-.36.41-.47.57-.34.34-.48.43-.39.36-.03 0-.21.23-.3.06-.2.28-.56.69-.36.37-.33.22-.44.25-.65.52-1.55 1.26.21.26.1.09.72.88.5.67.11.31-.06.89-.19 1.3-.67 1.47.01.12.1.12.27.58.27.52.12.31-.02.38.02.52-.02.48.01.1.21.37.35.32.08.09 0 .11-.22.42z" />
					<path data-name="xx里"
						:class="{ 'active-district': true, 'initial-animation-1': true }"
						:fill="districtColor"
						@click="handleDataSelection(1)"
						d="m426.45 43.57l-1.34 1.45-.97-.03-1.08.36-.14.78-.49.95-.5.58-.35 1.19-1.11.67-1.46.75-.95.13-.27.31-2.36 1.2-.92 1.23-1.54.46-.15.05-.35.55-.74.86-.62 1.05-.02.24.47.96.23 2.05.71.4.44.5.03.04.14.62.15.32.12.18.26.24.14.11.01.11.03.25-.06.14-.16.13-.29.13-.36.09-.28.18-.24.24-.11.21-.01.31.02.4.05.28.18.27.23.14.21.08.22.19.07.33.05.58.08 1.21-.01.28-.09.13-.15.19-.21.16-.15.07-.28.15-.37.14-.31.17-.24.16-.11.21-.1.24.02.17.01.18.07.15.1.22.05.13-.03.53-.06.35-.1.42-.01.04-.03.14-.06.14-.17.14-.11.05-.17.08-.35.11-.48.12-.19.01-.22.05-.18.11-.07.15-.16.29-.12.17-.39.35-.06.25.06.65.17.84-.09.42-.09.3-.2.44-.12.36-.05.33-.04.28-.18.4-.14.28 0 .16-.19.32-.07.12-.15.25-.22.38-.46.5-.3.41-.24.26-.39.31-.39.21-.24.09-.22-.02-.38-.12-.44-.06-.31.03-.45.2-.71.29-.33.1-.5.14-.04.01-.04 0-.47.08-.38.14-.48.34-.01.01-.08.07-.27.24-.11.13-.18.25-.28.5-.29.64-.31.47-1.85 2.53-.36.77-.36.29.02.16.05.49-.43.78-.01.61.82.53.28 1.13 1.54 3.16.03.67 2.59 2.3.25.35.31 1.91-.19.88 0 .01-.98 1.08.37.1.07.4-.1.21-.11.79-.23.11-.07.18-.32.11-.07.18-.29.02-.55.18-.03.3-.14 1.52-.53 1.66-.43.56-.2.86-.14 1.48-.32.77-.73 1.33-.05.92-.02.39.42 1.93-.14.62-.95 1.68-.92.53-1.3.44-.08.01-1.03.02-.46.32-1.38 1.64-.41.15-.98.03-2.52.5-.53.26-.91.78-.44-.24-.9-.03-.46 1.63-1.02 2.05-.01.03-.8 1.78-2 3.31-.41 1.17-.06.18-.72 1.49.03.18-.48.84.17.46 5.38-1.42 2.39.84-.72 3.65-1.05 1.37-2.52 3.3-.25.32-1.94 2.32-1.16 1.38-.61 1.01-.57.95-2.22 3.68-.72 3.2-.44 4.23.44.46 1.44.77 1.88 1.16 1.26 1.73-.08 1.35-1.41 3.39.57 1.87 1.46 1.93 1.47 2.54.12-.61.27-.91.53-.55.4.01 1.07.06 1.13-.54.74-.97.66-.3.67-.3.27-.55-.13-.85-.06-.79.46-.79.81-.66.93-.55 1.26-.42.73.44-.07.3.02.01.32.29.26.13.2.48-.14.73-.27.61.07.42.26.43.53.12 1.06.61.6.67.59 1.83.79 2.85.91 3.16.61.15.02.01.34.09.58.26 1.17.64 2.63 1.21.18.11.45.29 1.85 1.16.46 1.15 1.06 2.37.29.51.13.25.93 1.63 4.68 1.66-2.29 2.88.15.49-.34 1.64-.81 1.39-1.47 1.4 1.06 2.12.92 1.46.79 1.4.53.98 1.26 1.34 1.32 1.47.33-.37.13-.77-.32-.48-.12-.22 0-.29-.24-.3-.44-.4-.4-.55-.4-.88-.11-.85.04-.37-.44-.25-.32-.26-.2-.37-.04-.44.36-.15.73-.29.84-.62.45-.58.28-.55-.16-.51-.03-.92.28-.51.48-.33.25-.55-.28-.59-.32-.59-.04-.8.17-.63.4-.29.52.08.77.11.4-.15.4-.32.17-.63.12-.91-.04-.52.05-.33.31-.39.13-.16.73-.4.56-.14.11-.09.59-.37.79-.49 1.37-1.06.33-.77.09-1.06 3.35-3.69.64-.51.73-.62.48-.66.97-1.39.69-1.36.09-1.32.05-1.79-.11-1.76-.35-3.93-.3-5.03-.39-2.53-.03-2.2.17-.66.48-.66 1.01-.43 1.13-.7.36-.69-.03-.88-.28-.55-.44-.56-.24-.62-.23-1.03-.04-.95 0-.7.45-.62.85-.73.92-.84.41-.4.32-.52.04-.44-.11-.4-.32-.29-.28-.96-.24-1.47-.43-1.32-.4-1.28-.36-.78-.32-.51-.51-.92-.89-.22-1.6-.16-1.17-.18-.44-.56-.28-.69-.19-.63 0-1.24-.11-1.03 0-.04-.04-1.28-.23-1.21-.32-.81.08-.3.12-.47.17-.48.28-.66.97-1.17.65-.95.44-.58.41-.81.32-.25.81-.22.76-.4 1.01-1.13-.19-1.14-.28-1.32-.11-.89-.16-1.46 0-.63.13-.47.56-.51.65-.48.44-.33.41-.73.04-.88.05-1.43-.07-1.69-.16-1.35-.28-.96-.47-1.32.07-.4.01-.08.04-.18.57-.29 3.82-.22.31-1.75.36-1.41.16-.57 0-.14-.04-1.79.03-.21.01-.13 0-.01.12-.54.26-.77.07-.13.13-.1.21-.11.28-.22.27-.25.24-.33.18-.18.19-.1.31-.1.47-.13.19-.07.08-.09.1-.15.07-.24.14-.24.22-.3.21-.22.2-.12.24-.11.16-.08.06-.08.08-.19.15-.28.22-.34.2-.18.17-.13.21-.09.34-.09.21-.06.31-.16.54-.28.23-.14.17-.17.1-.26.13-.18.23-.18.21-.17.17-.18.18-.24.08-.22.08-.16.11-.11.27-.16.18-.13.1-.1.09-.12.1-.12.15-.16.11-.12.12-.07.28-.12.21-.13.18-.15.04-.08.01-.24 0-.09.02-.08.09-.11.24-.25.32-.42.19-.36.14-.22.07-.11.08-.05.12.02.1.02.11-.02.13-.07.28-.14.07-.07.02-.07.02-.31.04-.12.06-.09.04-.02.07-.04.17-.09.1-.08.05-.08 0-.2 0-.09.1-.15.11-.18.03-.09-.03-.08-.09-.11-.07-.17-.04-.13-.03-.23.01-.08.04-.15.14-.72.03-.28-.01-.34 0-.12.08-.11.06-.08.18-.13.23-.16.14-.08.14-.03.17 0 .17-.05.16-.08.07-.08 0-.11-.03-.08-.1-.09-.1-.13-.06-.14-.03-.11-.01-.19.03-.21-.01-.11-.06-.17 0-.14.01-.13-.07-.11-.09-.08-.14-.02-.16-.02-.13-.07-.11-.13-.07-.13-.1-.15-.1-.16-.04-.13-.06-.12-.1-.08-.11-.04-.05-.09-.09-.17-.12-.15-.12-.11-.12-.14-.04-.09 0-.12 0-.08-.02-.07-.05-.04-.07-.03-.11-.03-.07-.02-.07-.04-.07-.06-.06-.17-.08-.22-.08-.13-.05-.1-.03-.11 0-.07.01-.11-.02-.11-.05-.11-.03-.11 0-.14.01-.14.01-.16.04-.16.06-.16 0-.04-.06-.38-.01-.14.02-.18-.02-.12-.04-.1-.11-.07-.15-.05-.32-.11-.66-.24-.43-.26-.27-.25-.09-.13-.09-.25-.02-.18.06-.28.1-.23.08-.17.04-.14 0-.15 0-.07-.04-.17-.07-.12-.05-.06-.27-.27-.27-.24-.15-.15-.13-.24-.08-.23-.03-.24-.02-.39 0-.24.01-.12.02-.07.05-.09.08-.05.17-.04.23-.09.27-.15.12-.08.18-.2.08-.16.04-.27-.01-.26-.05-.49.05-.33.12-.19.44-.44.42-.42.18-.1.24-.05.31-.03 1.55-.13.18-.01.09-.09.03-.16-.01-.1-.27-.42-.04-.18.01-.18.12-.17.06-.33.03-.4-.05-.35-.15-.33-.12-.18-.12-.36-.21-.37-.2-.2-.58-.4-.27-.24-.38-.59-.49-.49-.05-.09-.07-.12-.04-.17.02-.2.1-.48.09-.2.19-.22.17-.17.23-.17.25-.15.2-.14.12-.14.16-.22.15-.11.27-.14.09-.05.21-.2.07-.14.12-.11.17-.18.22-.25.23-.21.27-.22.14-.25.16-.37.02-.08-.06-.07-.14-.22-.07-.09-.47-.28-.25-.2-.07-.11-.01-.19.09-.28.14-.16.21-.18.38-.19.36-.12.19-.06.09.02.23.09.35.12.1.03.29.11.19.04.12-.06.07-.18 0-.42-.01-.32-.05-.13-.33-.36-.22-.28-.12-.15 0-.25.03-.1.14-.24.02-.11.11-.39.04-.23 0-.12-.06-.25-.09-.29-.05-.28-.03-.25-.04-.26-.03-.23-.02-.4-.02-.3-.01-.16 0-.02-.05-.24-.08-.22-.04-.1-.07-.54-.04-1.05-.05-.41-.06-.24-.15-.28-.29-.4-.32-.24-.54-.23-.46-.2-.49-.33-.2-.2-.23-.42-.12-.36.01-.15.08-.16.18-.14.32-.26.38-.32.11-.1.61-.38.65-.46.51-.37.34-.2.04-.03.08-.05.03-.04.01-.04-.02-.05-.04-.03-.06-.02-.22-.08-.25-.22-.2-.18-.22-.37-.35-.17-1-.23-1.37-.18-.72-.15-.59-.17-.74-.23-.4 0-.37.08-.93.43-1.24.57-1.06.84-1.04.53-.27-.02-.45-.17-1.18-.37-1.41-.67-1.69-.7-1.27-.44-.12-.03-.17 0-1.07.35-.31.26-.1.27-.01.03-.53 1.44-1.04-.31-2.2.31-.84.72-.7.5z"></path>
					</g>
			</svg>
			<Teleport to="body">
				<!-- The class "chart-tooltip" could be edited in /assets/styles/chartStyles.css -->
				<div v-if="targetDistrict" class="districtchart-chart-info chart-tooltip" :style="tooltipPosition">
					<h6>{{ targetDistrict }}</h6>
					<span>{{ districtData[targetDistrict] }} {{ chart_config.unit }}</span>
				</div>
			</Teleport>
		</div>
	</div>
</template>

<style scoped lang="scss">
.districtchart {
	max-height: 100%;
	position: relative;
	overflow-y: scroll;

	&-title {
		display: flex;
		flex-direction: column;
		justify-content: center;
		position: absolute;
		left: 0;
		top: 0;
		margin: 0.5rem 0 -0.5rem;

		h5 {
			color: var(--color-complement-text);
		}

		h6 {
			color: var(--color-complement-text);
			font-size: var(--font-m);
			font-weight: 400;
		}

		&-legend {
			display: flex;
			justify-content: space-between;

			div {
				position: relative;
				width: 3rem;
				margin: 0 4px;
				border-radius: 5px;
			}

			div:before {
				content: "";
				width: 3rem;
				height: var(--font-l);
				position: absolute;
				top: 0;
				left: 0;
				background: linear-gradient(270deg, rgba(40, 42, 44, 1), rgba(40, 42, 44, 0.2));
			}

			p {
				color: var(--color-complement-text)
			}
		}
	}

	&-chart {
		display: flex;
		justify-content: center;

		svg {
			width: 50%;

			path {
				transition: transform 0.2s;
				opacity: 0;
			}
		}

		&-info {
			position: fixed;
			z-index: 20;
		}
	}

}

.active-district {
	transform: translateY(-5px);
}

@keyframes ease-in {
	0% {
		opacity: 0
	}

	;

	100% {
		opacity: 1
	}
}

@for $i from 1 through 12 {
	.initial-animation-#{$i} {
		animation-name: ease-in;
		animation-duration: 0.2s;
		animation-delay: 0.05s * ($i - 1);
		animation-timing-function: linear;
		animation-fill-mode: forwards;
	}
}
</style>